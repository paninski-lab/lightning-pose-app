<style>
  :host {
    /* Display for angular elements is inline by default.
  This is a problem when querying the host height, because it ends up being just 0.
  */
    display: block;
  }
</style>

<div class="relative shadow-lg shadow-black/20 bg-base-200">
  <!-- bg is visible during loading state -->
  <!-- wrapper to contain video + keypoints -->
  <video
    #videoEl
    preload="auto"
    (loadedmetadata)="onLoadedMetadata()"
    muted
    (timeupdate)="updateLocalCurrentTime()"
    (ended)="onEnd()"
    (error)="onVideoTagError()"
    [src]="src()"
  >
    Your browser does not support the video tag.
  </video>
  <div [class.invisible]="!showProjectedContent()">
    <!-- wrapper to hide content until video inited -->
    <ng-content></ng-content>
  </div>

  <div
    class="absolute inset-0 overflow-auto p-2"
    [class.invisible]="!videoErrorMessage()"
  >
    {{ videoErrorMessage() }}
    <p class="text-sm text-gray-400 mt-2">Source: {{ src() }}</p>
  </div>
</div>
<!--<p>T: {{ localCurrentTime() }}</p>-->
