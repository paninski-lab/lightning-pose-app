<div
  #viewport
  class="relative w-full h-full overflow-hidden rounded-lg bg-gray-100 shadow-lg"
  (mousedown)="onMouseDown($event)"
  (mouseup)="onMouseUp()"
  (mouseleave)="onMouseUp()"
>
  <div
    class="absolute transform-gpu transition-transform duration-0 ease-linear origin-top-left"
    [style.transform]="getTransform()"
  >
    <img
      #imageElement
      [src]="imageUrl"
      (load)="onImageLoad()"
      class="block w-full h-auto rounded-md"
      alt="Zoomable Image"
    />
    @for (kp of keypoints(); track $index) {
      <div
        class="keypoint-marker absolute rounded-full border-2 border-white cursor-pointer flex items-center justify-center text-xs text-white font-bold"
        [style.left.px]="kp.x"
        [style.top.px]="kp.y"
        [style.backgroundColor]="kp.color || 'red'"
        [style.opacity]="0.5"
        [title]="kp.label || 'Keypoint ' + ($index + 1)"
      >
        @if (kp.label) {
          <span class="p-1 whitespace-nowrap">{{ kp.label }}</span>
        }
      </div>
    }
  </div>
</div>
