<style>
  :host {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  .navbar {
    min-height: 3rem; /* reduce from default of 4rem */
  }
</style>
<header>
  <nav class="navbar bg-base-200 shadow-lg">
    <div class="navbar-start">
      <a href="/"><span class="text-lg font-semibold">Lightning Pose</span></a>
    </div>

    <div class="navbar-center">
      <ul class="menu menu-horizontal p-0">
        @for (
          entry of [
            { path: "/labeler", text: "Labeler" },
            { path: "/models", text: "Models" },
            { path: "/viewer", text: "Viewer" },
          ];
          track entry.path
        ) {
          <li>
            <a
              [routerLink]="entry.path"
              routerLinkActive="menu-active"
              ariaCurrentWhenActive="page"
              >{{ entry.text }}</a
            >
          </li>
        }
      </ul>
    </div>

    <div class="navbar-end">
      @if (fineVideoService.numPendingTranscodeTasks().pending > 0) {
        <div
          class="tooltip tooltip-left"
          [attr.data-tip]="
            'Transcoding videos: ' +
            fineVideoService.numPendingTranscodeTasks().pending.toString() +
            ' remaining'
          "
        >
          <span class="loading loading-bars loading-xs"></span>
        </div>
      }

      <button
        class="btn btn-ghost"
        tabindex="0"
        (click)="settingsDialogOpen.set(true)"
        (keydown.enter)="settingsDialogOpen.set(true)"
      >
        <span class="material-icons">settings</span>
      </button>
    </div>
  </nav>
</header>

<!-- Set min-height: 0 to allow it to shrink if its content is too large.
  Default min-height for flex items is auto. -->
<main class="flex-grow flex min-h-0" [class.justify-center]="!hasBeenSetup()">
  @if (hasBeenSetup()) {
    <router-outlet />
  } @else {
    <app-project-settings
      [setupMode]="true"
      class="w-lg mt-8"
    ></app-project-settings>
  }
</main>

<!-- Settings dialog -->
<dialog #settingsDialog class="modal">
  @if (settingsDialogOpen()) {
    <app-project-settings
      class="modal-box w-5/6 max-w-3xl h-2/3 max-h-150"
      (done)="settingsDialogOpen.set(false)"
    ></app-project-settings>

    <!-- Makes the dialog close when clicked from outside. -->
    <div class="modal-backdrop">
      <button (click)="settingsDialogOpen.set(false)">close</button>
    </div>
  }
</dialog>
